# üöÄ AdventureWorks AI Operations Co‚ÄëPilot

A full-stack FastAPI application that fuses real sales data, ML forecasts, and LLM copilots to supercharge AdventureWorks‚Äô day-to-day operations. From answering ad-hoc analytics questions to preventing stockouts and simulating demand shocks, everything runs from a single command: `uvicorn main:app --reload`.

---

## üåü Flagship Experiences

- **Analytics Command Center (`analytics.html`)**  
  - A Tailwind + Chart.js dashboard fed by Supabase tables and Holt-Winters forecasts.  
  - Live KPIs, weekly sales trends, category/territory breakdowns, and top-product tables.  
  - **Embedded AI Assistant:** ask natural-language questions about the sales database and instantly get narrative insights plus on-demand Chart.js visualizations generated by GPT-4o + Gemini.

- **Inventory Forecast Hub (`main.html`)**  
  - Shows next-week demand projections for the top SKUs with 80/95% confidence bands.  
  - **Restock Warnings:** compares live stock_table counts to the upper forecast limit to flag replenishment needs before a shortage hits.

- **Proactive Stock Guardian (`details.html`)**  
  - Surfaces looming stock-outs and quantifies the gap (current stock vs. forecast).  
  - **One-click Supplier Emails:** built-in SMTP workflow auto-fills a purchase order email so ops teams can order more inventory without leaving the page.

- **Adaptive Workforce Planner (`orders.html`)**  
  - Detects busy weeks via demand forecasts, then invokes Gemini to rebalance staff rosters automatically.  
  - Produces a brand-new pandas schedule that slots in extra associates exactly where traffic spikes.

- **Scenario Simulator + Impact Storytelling**  
  - **Anomaly Lab:** trigger demand spikes per product (`/api/anomaly/trigger-spike`) and watch the detection service classify severity, stock exposure, and revenue-at-risk.  
  - **Impact Metrics Dashboard (`impact_metrics.html`):** quantifies stockouts prevented, inventory dollars optimized, forecast accuracy, and ROI narratives for stakeholders‚Äîall backed by live data and documented assumptions (`metrics_notes.txt`).

---

## üß† Under the Hood

| Layer | Technologies |
| --- | --- |
| **Backend** | FastAPI, uvicorn, psycopg2, Pydantic, FastAPI Mail |
| **Data & ML** | pandas, numpy, statsmodels (Holt-Winters), residual bootstrapping, Supabase Postgres (`Sales_data`, `Product_Lookup`, `Territory_Lookup`, `stock_table`, etc.), CSV artifacts generated in `PredictOrders.ipynb` & `Predict_Products_Sold.ipynb` |
| **AI/LLM** | OpenAI GPT-4o (code-generation chatbot), Google Gemini 2.5 Pro/Flash (natural-language summaries + staff scheduling) |
| **Frontend** | Jinja2 templates, Tailwind CSS, Chart.js + chartjs-plugin-datalabels, Font Awesome |
| **Email & Alerts** | Gmail SMTP app password, HTML email templates for supplier outreach |

---

## üìà Forecasting Methodology

1. **Holt-Winters Core Models**  
   - Each product (and the aggregate orders series) is modeled with triple-exponential smoothing to capture level, trend, and seasonality.  
2. **Rolling Cross-Validation for Hyperparameters**  
   - Trend types (`add`, `mul`, `None`), seasonal types, and seasonal periods are tuned via walk-forward splits (train vs. last eight weeks) to minimize MAPE.  
3. **Residual Bootstrapping Confidence Bands**  
   - After fitting on the full history with the best hyperparameters, we sample model residuals 1,000 times and add them to the deterministic forecast.  
   - Percentiles (2.5/10/90/97.5) create robust 80% and 95% intervals, which downstream services use for restock alerts, anomaly thresholds, and ROI math.

---

## üß© Data Flow Highlights

- Notebook pipelines export `orders_weekly.csv`, `forecasted_orders_synthetic_1.csv`, `top10_product_ts.csv`, and `top10_products_forecast_results.csv` into `csv_files/`, which the API uses for historical context and forecasts.
- Live warehouse data stays in Supabase; helper functions (`get_tables_*`) stream tables into pandas DataFrames on demand.
- Stockout, inventory-efficiency, and ROI endpoints recombine those data sources to tell a cohesive impact story.

---

## ‚ñ∂Ô∏è Run It Locally

1. Install dependencies: `pip install -r requirements.txt`
2. Set environment variables (`PASS_DB`, `APP_PASSWORD`, `OPENAI_API`, `GEMINI_API_KEY`, etc.).
3. Launch the server:
   ```
   uvicorn main:app --reload
   ```
4. Open `http://127.0.0.1:8000/analytics.html` (or `/main_page`, `/details_page`, `/orders_page`, `/impact_metrics`) and start exploring.

---

Ready to chat with your data, rescue inventory before it stockouts, and justify the ROI in one place. ‚ú®

